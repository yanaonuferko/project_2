# Quote Bot

Telegram бот для получения вдохновляющих цитат, построенный на aiogram 3 с использованием ZenQuotes API.

## Авторы

- Онуферко Яна Олеговна 466956
- Румянцева Ирина Александровна 474355

## Возможности

- **Случайные цитаты**: Получение вдохновляющих цитат через `/quote`
- **Избранное**: Управление избранными цитатами через `/favorites`
- **API интеграция**: Реальные данные из ZenQuotes API
- **Кэширование**: Быстрые ответы благодаря умному кэшированию
- **Многоязычность**: Поддержка английского и русского языков
- **Логирование**: Полное логирование всех операций

## Команды

- `/start` - Приветствие и инструкция
- `/help` - Список всех команд
- `/quote` - Случайная цитата из API
- `/favorites` - Избранные цитаты
- `/language` - Выбор языка интерфейса
- `/cache_stats` - Статистика кэша (скрытая)
- `/clear_cache` - Очистка кэша (скрытая)

## Установка и запуск

1. Установите зависимости:
   ```bash
   pip install -r requirements.txt
   ```

2. Создайте `.env` файл и добавьте токен бота:
   ```
   BOT_TOKEN=ваш_токен_телеграм_бота
   LOG_LEVEL=INFO
   ```

3. Запустите бота:
   ```bash
   python bot.py
   ```

4. Протестируйте API (опционально):
   ```bash
   python test_api.py
   ```

## Структура проекта

```
├── bot.py                   # Главный файл бота
├── test_api.py              # Тесты API функциональности  
├── requirements.txt         # Python зависимости
├── .env                     # Переменные окружения
├── config/                  # Конфигурация и настройки
│   ├── __init__.py
│   └── settings.py
├── routers/                 # Обработчики команд
│   ├── __init__.py
│   ├── commands.py          # Основные команды
│   └── handlers/
├── services/                # Внешние сервисы
│   ├── __init__.py
│   ├── api_client.py        # Quotable API клиент
│   └── models.py            # Модели данных
├── states/                  # FSM состояния
│   ├── __init__.py
│   └── quote_states.py      # Состояния для цитат
├── utils/                   # Утилиты
│   ├── __init__.py
│   ├── logger.py            # Логирование
│   └── formatters.py
├── keyboards/               # Клавиатуры бота
├── filters/                 # Пользовательские фильтры
├── middlewares/             # Промежуточные обработчики
├── storage/                 # Локальное хранилище
└── locales/                 # Файлы локализации
```


## Особенности реализации

### API клиент
- Асинхронные запросы с обработкой таймаутов
- Умное кэширование (TTL 30 секунд)
- Обработка HTTP ошибок
- Логирование всех операций

### FSM (Finite State Machine)
- Состояние ожидания ввода автора
- Валидация пользовательского ввода
- Очистка состояния после операции

### Архитектура
- Модульная структура с четким разделением ответственности
- Конфигурация через переменные окружения
- Централизованное логирование
- Готовность к масштабированию
